<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSDP Formalization - Overview</title>
    <link rel="stylesheet" href="static/style.css">
    
</head>
<body>
    <nav class="nav-container">
        <div class="nav-content">
            <a href="index.html" class="nav-brand">DSDP Formalization</a>
            <ul class="nav-tabs">
                <li><a href="index.html" class="active">Overview</a></li>
                <li><a href="stats.html" >Lemma Stats</a></li>
                <li><a href="dependencies.html" >Dependencies</a></li>
            </ul>
            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle light/dark theme">
                <span class="theme-icon">â˜€ï¸</span>
            </button>
        </div>
    </nav>
    
    <main class="container">
        
<h1>DSDP Formalization</h1>

<p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 2rem;">
    Dual protocols for private multi-party matrix multiplication - Information-theoretic security proofs in Rocq/Coq
</p>

<div class="stats-grid">
    <div class="stat-card">
        <div class="value">150</div>
        <div class="label">Total Lemmas</div>
    </div>
    <div class="stat-card">
        <div class="value">16</div>
        <div class="label">Main Results</div>
    </div>
    <div class="stat-card">
        <div class="value">5</div>
        <div class="label">Theorems</div>
    </div>
    <div class="stat-card">
        <div class="value">134</div>
        <div class="label">Helper Lemmas</div>
    </div>
    <div class="stat-card">
        <div class="value">11</div>
        <div class="label">Files</div>
    </div>
    
    <div class="stat-card">
        <div class="value" style="font-size: 1.2rem;"><a href="https://github.com/weng-chenghui/infotheo/commit/8ba32e3b086c94c8a5caf5e136a783060ba22bda" target="_blank" rel="noopener" style="color: var(--accent); text-decoration: none;">8ba32e3</a></div>
        <div class="label">Source Commit</div>
    </div>
    
</div>

<div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
    <a href="stats.html" class="btn btn-primary">Browse Lemma Stats &rarr;</a>
    <a href="dependencies.html" class="btn">View Dependencies &rarr;</a>
</div>

<div class="markdown-content">
<h1 id="dsdp-formalization-layer-design">DSDP Formalization Layer Design</h1>
<p>This document describes the layered architecture of the <code>dumas2017dual</code> Coq formalization for the DSDP (Dual protocols for private multi-party matrix multiplication) protocol.</p>
<h2 id="directory-structure">Directory Structure</h2>
<pre><code>dumas2017dual/
â”œâ”€â”€ lib/                           # Layer 1: General infrastructure
â”‚   â”œâ”€â”€ extra_algebra.v           # Log, bigop, Z/mZ unit lemmas
â”‚   â”œâ”€â”€ extra_proba.v             # Conditional probability, RV permutations
â”‚   â”œâ”€â”€ extra_entropy.v           # Entropy sum, cond. independence, zero entropy
â”‚   â””â”€â”€ rouche_capelli.v          # Linear system solution counting (RouchÃ©-Capelli)
â”‚
â”œâ”€â”€ entropy_fiber/                 # Layers 2-3: Abstract + linear fiber entropy
â”‚   â”œâ”€â”€ entropy_fibers.v          # Abstract fiber entropy framework
â”‚   â””â”€â”€ entropy_linear_fibers.v   # Linear algebra specialization
â”‚
â”œâ”€â”€ zpq/                           # Layer 4: Z/pqZ specialization
â”‚   â””â”€â”€ fiber_zpq.v               # Fiber cardinality over composite moduli
â”‚
â””â”€â”€ dsdp/                          # Layer 5: DSDP protocol-specific
    â”œâ”€â”€ dsdp_extra.v              # DSDP auxiliary definitions
    â”œâ”€â”€ dsdp_program.v            # Protocol execution model
    â”œâ”€â”€ dsdp_algebra.v            # DSDP linear system cardinality
    â”œâ”€â”€ dsdp_entropy.v            # DSDP entropy analysis
    â””â”€â”€ dsdp_security.v           # Main security theorems
</code></pre>
<h2 id="dependency-hierarchy">Dependency Hierarchy</h2>
<pre><code>                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         Layer 5: DSDP           â”‚
                    â”‚  dsdp_security.v                â”‚
                    â”‚  dsdp_entropy.v                 â”‚
                    â”‚  dsdp_algebra.v                 â”‚
                    â”‚  dsdp_program.v, dsdp_extra.v   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      Layer 4: Z/pqZ             â”‚
                    â”‚      fiber_zpq.v                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Layer 3: Linear Fibers        â”‚
                    â”‚   entropy_linear_fibers.v       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Layer 2: Abstract Fibers      â”‚
                    â”‚   entropy_fibers.v              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ extra_algebra â”‚    â”‚     extra_entropy        â”‚    â”‚ rouche_capelli  â”‚
â”‚    (.v)       â”‚    â”‚        (.v)              â”‚    â”‚     (.v)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                          â”‚                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      Layer 1: Infrastructure    â”‚
                    â”‚      (infotheo core libraries)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 id="layer-descriptions">Layer Descriptions</h2>
<h3 id="layer-1-general-infrastructure-lib">Layer 1: General Infrastructure (<code>lib/</code>)</h3>
<p><strong>Purpose:</strong> Provide general-purpose lemmas extending MathComp and infotheo that are not specific to DSDP or even to secure computation.</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Content</th>
<th>Key Lemmas</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>extra_algebra.v</code></td>
<td>Log properties, bigop manipulation, Z/mZ units</td>
<td><code>logr_eq1</code>, <code>Zp_unitP</code>, <code>Zp_Fp_card_eq</code></td>
</tr>
<tr>
<td><code>extra_proba.v</code></td>
<td>Conditional probability, RV permutation lemmas</td>
<td><code>sum_cPr_eq</code>, <code>jproduct_ruleRV</code>, <code>centropyA</code></td>
</tr>
<tr>
<td><code>extra_entropy.v</code></td>
<td>Entropy characterization, conditional independence</td>
<td><code>cinde_centropy_eq</code>, <code>zero_centropy_eq_deterministic</code></td>
</tr>
<tr>
<td><code>rouche_capelli.v</code></td>
<td>Linear system solution counting</td>
<td><code>count_affine_solutions_explicit</code>, <code>count_affine_solutions_rank1</code></td>
</tr>
</tbody>
</table>
<p><strong>Design Principle:</strong> These lemmas could potentially be contributed upstream to infotheo or mathcomp-analysis.</p>
<h3 id="layer-2-abstract-fiber-entropy-entropy_fiberentropy_fibersv">Layer 2: Abstract Fiber Entropy (<code>entropy_fiber/entropy_fibers.v</code>)</h3>
<p><strong>Purpose:</strong> Establish the connection between fiber (preimage) structure and entropy calculations in a type-generic way.</p>
<p><strong>Key Concepts:</strong>
- <strong>Fiber:</strong> The preimage <code>{x | f(x) = c}</code> of a value c under function f
- <strong>Constant fiber entropy:</strong> When all fibers have equal cardinality k, conditional entropy = log(k)</p>
<p><strong>Key Lemmas:</strong></p>
<table>
<thead>
<tr>
<th>Lemma</th>
<th>Statement</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>centropy1_uniform_fiber</code></td>
<td>H(X|Y=c) = log|fiber(c)| when X is uniform over fiber</td>
</tr>
<tr>
<td><code>centropy_constant_fibers</code></td>
<td>H(X|Y) = log(k) when all fibers have size k</td>
</tr>
<tr>
<td><code>centropy_determined_contract</code></td>
<td>H((X,Y)|Cond) = H(X|Cond) when Y is determined by X</td>
</tr>
</tbody>
</table>
<h3 id="layer-3-linear-fiber-entropy-entropy_fiberentropy_linear_fibersv">Layer 3: Linear Fiber Entropy (<code>entropy_fiber/entropy_linear_fibers.v</code>)</h3>
<p><strong>Purpose:</strong> Specialize the abstract fiber framework to linear algebra structures over finite fields.</p>
<p><strong>Key Concepts:</strong>
- <strong>Linear fiber:</strong> Solution set <code>{v | uÂ·v = s}</code> of a dot product equation
- <strong>Bilinear form:</strong> Fiber of a bilinear map</p>
<p><strong>Key Lemmas:</strong></p>
<table>
<thead>
<tr>
<th>Lemma</th>
<th>Statement</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>linear_fiber_card</code></td>
<td>|{v | uÂ·v = s}| = |F|^(n-1) for n-dimensional v</td>
</tr>
<tr>
<td><code>linear_fiber_card_eq</code></td>
<td>All fibers of same u have equal cardinality</td>
</tr>
<tr>
<td><code>centropy_bilinear_uniform</code></td>
<td>H(V | U,S) = log(|F|^(n-1)) for bilinear constraint</td>
</tr>
</tbody>
</table>
<p><strong>Wrapper Design:</strong> These lemmas wrap the general RouchÃ©-Capelli theory from <code>rouche_capelli.v</code> with an entropy-focused API that hides matrix notation.</p>
<h3 id="layer-4-zpqz-specialization-zpqfiber_zpqv">Layer 4: Z/pqZ Specialization (<code>zpq/fiber_zpq.v</code>)</h3>
<p><strong>Purpose:</strong> Handle fiber cardinality over composite moduli Z/(pq)Z where p, q are primes.</p>
<p><strong>Key Challenge:</strong> In Z/pqZ, not all elements are units, so the standard field-based fiber counting doesn't directly apply.</p>
<p><strong>Key Concepts:</strong>
- <strong>Small component:</strong> An element u &lt; min(p,q) is coprime to pq, hence a unit
- <strong>Pivot solve:</strong> Given uÂ·v = target with u a unit, solve for one coordinate</p>
<p><strong>Key Lemmas:</strong></p>
<table>
<thead>
<tr>
<th>Lemma</th>
<th>Statement</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lt_minpq_coprime</code></td>
<td>u &lt; min(p,q) âŸ¹ gcd(u, pq) = 1</td>
</tr>
<tr>
<td><code>linear_fiber_zpq_card</code></td>
<td>|{v | uÂ·v = s}| = m^(n-1) when u has a unit component</td>
</tr>
<tr>
<td><code>fiber_zpq_pair_card</code></td>
<td>2D fiber cardinality = m for small coefficients</td>
</tr>
</tbody>
</table>
<h3 id="layer-5-dsdp-protocol-dsdp">Layer 5: DSDP Protocol (<code>dsdp/</code>)</h3>
<p><strong>Purpose:</strong> Formalize the specific DSDP protocol and prove its security properties.</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dsdp_extra.v</code></td>
<td>Auxiliary definitions for DSDP</td>
</tr>
<tr>
<td><code>dsdp_program.v</code></td>
<td>Protocol execution model, trace structure</td>
</tr>
<tr>
<td><code>dsdp_algebra.v</code></td>
<td>DSDP constraint matrix rank and kernel cardinality</td>
</tr>
<tr>
<td><code>dsdp_entropy.v</code></td>
<td>Main entropy analysis: H(V2,V3 | AliceView)</td>
</tr>
<tr>
<td><code>dsdp_security.v</code></td>
<td>Top-level security theorem</td>
</tr>
</tbody>
</table>
<p><strong>Key Results:</strong></p>
<table>
<thead>
<tr>
<th>Theorem</th>
<th>Statement</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dsdp_centropy_uniform_solutions</code></td>
<td>H((V2,V3) | constraint) = log(m)</td>
</tr>
<tr>
<td><code>privacy_by_bonded_leakage</code></td>
<td>H((V2,V3) | AliceView) = H(V2 | AliceView)</td>
</tr>
<tr>
<td><code>dsdp_security_bounded_leakage</code></td>
<td>H(V2 | AliceView) = log(m) &gt; 0</td>
</tr>
</tbody>
</table>
<h2 id="design-principles">Design Principles</h2>
<h3 id="1-abstraction-before-specialization">1. Abstraction Before Specialization</h3>
<p>Each layer provides abstract results that are then specialized by the layer above. This enables:
- Reuse of proofs across different instantiations
- Clear separation of mathematical concerns
- Potential generalization to other protocols</p>
<h3 id="2-wrapper-lemmas">2. Wrapper Lemmas</h3>
<p>When general results (e.g., RouchÃ©-Capelli) use different notation than entropy applications need (matrices vs. dot products), we provide thin wrappers that:
- Hide irrelevant complexity
- Provide the natural API for the domain
- Document WHY the wrapper exists</p>
<h3 id="3-naming-conventions-mathcomp-style">3. Naming Conventions (MathComp Style)</h3>
<ul>
<li><code>_card</code>: Cardinality lemmas (e.g., <code>fiber_card</code>)</li>
<li><code>_E</code> or <code>_eq</code>: Equality/characterization (e.g., <code>S_E</code>)</li>
<li><code>_neq0</code>: Non-zero conditions</li>
<li><code>centropy_</code>: Conditional entropy lemmas</li>
<li><code>dsdp_</code>: Protocol-specific lemmas</li>
</ul>
<h3 id="4-comment-documentation">4. Comment Documentation</h3>
<p>Each lemma should have a comment explaining:
- What it states (in plain mathematical terms)
- Why it's needed (its role in the overall proof)
- How it relates to other lemmas (wrappers, specializations)</p>
<h2 id="file-statistics">File Statistics</h2>
<table>
<thead>
<tr>
<th>Layer</th>
<th>Files</th>
<th>Lemmas</th>
<th>Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td>1 (lib)</td>
<td>4</td>
<td>52</td>
<td>~2000</td>
</tr>
<tr>
<td>2-3 (entropy_fiber)</td>
<td>2</td>
<td>25</td>
<td>~800</td>
</tr>
<tr>
<td>4 (zpq)</td>
<td>1</td>
<td>17</td>
<td>~600</td>
</tr>
<tr>
<td>5 (dsdp)</td>
<td>5</td>
<td>47</td>
<td>~2500</td>
</tr>
<tr>
<td><strong>Total</strong></td>
<td><strong>12</strong></td>
<td><strong>141</strong></td>
<td><strong>~5900</strong></td>
</tr>
</tbody>
</table>
<h2 id="related-documents">Related Documents</h2>
<ul>
<li><code>20251209_v2_stats.md</code>: Complete lemma listing with signatures and meanings</li>
<li><code>DOCUMENTATION_STRUCTURE.md</code>: Overview of documentation organization</li>
<li>Individual subdirectories contain detailed mathematical notes for each component</li>
</ul>
</div>


    </main>
    
    <footer class="footer container">
        <p>Generated: 2025-12-10 | 150 lemmas in 11 files | Source: <a href="https://github.com/weng-chenghui/infotheo/commit/8ba32e3b086c94c8a5caf5e136a783060ba22bda" target="_blank" rel="noopener" style="color: var(--accent);">8ba32e3</a></p>
    </footer>
    
    <script>
    // Theme toggle
    function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);
    }
    
    function updateThemeIcon(theme) {
        const icon = document.querySelector('.theme-icon');
        if (icon) {
            icon.textContent = theme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
        }
    }
    
    // Load saved theme
    (function() {
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        // Icon will be updated after DOM loads
        document.addEventListener('DOMContentLoaded', () => updateThemeIcon(savedTheme));
    })();
    </script>
    
</body>
</html>
